<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eric Dao - Engineering Leader | IT Director</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Modern Professional (Background: #F8F7F1, Text: #2d3748, Accent: #4299e1) -->
    <!-- Application Structure Plan: A single-page application with a sticky top navigation for easy access to all sections. The structure is thematic (Competencies, Experience, Achievements) rather than purely chronological to highlight skills and impact upfront. The core of the application is an interactive vertical timeline for the work history, which allows users to drill into details on-demand, preventing information overload and enhancing engagement. A KPI dashboard with charts visualizes key accomplishments for quick synthesis. This design improves scannability and creates a more memorable experience for recruiters. -->
    <!-- Visualization & Content Choices: 1. Work History -> Goal: Explore Career Progression -> Presentation: Interactive Vertical Timeline (HTML/CSS/JS) -> Interaction: Click to reveal details in a side panel -> Justification: Manages dense information effectively and provides an intuitive way to explore a long career path. 2. Patent Portfolio -> Goal: Inform/Show Proportion -> Viz: Donut Chart (Chart.js) -> Interaction: Hover tooltips -> Justification: More visually engaging and quicker to understand than a simple number. 3. Core Competencies -> Goal: Compare/Inform -> Viz: Horizontal Bar Chart (Chart.js) -> Interaction: Hover tooltips -> Justification: Clearly visualizes proficiency levels and key strengths. CONFIRMATION: NO SVG/Mermaid used. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <link rel="icon" type="image/png" href="ed-favicon.png">
    <!-- Design Tokens -->
    <style>
        :root {
            --bg: #F8F7F1;
            --bg-alt: #ffffff;
            --bg-soft: #f1efe6;
            --text: #2d3748;
            --text-soft: #4a5568;
            --border: #e2e8f0;
            --accent: #2563eb;
            --accent-hover: #1d4ed8;
            --accent-soft: #e6f1fe;
            --radius-sm: 4px;
            --radius-md: 10px;
            --radius-lg: 18px;
            --shadow-xs: 0 1px 2px rgba(0,0,0,0.06);
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.08);
            --shadow-md: 0 6px 18px -4px rgba(0,0,0,0.12);
            --grad-accent: linear-gradient(90deg,#1d4ed8 0%, #3b82f6 60%, #60a5fa 100%);
        }
        .dark {
            --bg: #1b2431;              /* was #0f172a */
            --bg-alt: #243142;          /* was #111c33 */
            --bg-soft: #2d3b4e;         /* was #1e293b */
            --text: #f5f7fa;            /* slightly warmer for readability */
            --text-soft: #d1d8e2;       /* higher contrast than previous */
            --border: #38495c;
            --accent: #4ea6ff;          /* slightly lighter accent for AA on dark */
            --accent-hover: #74baff;
            --accent-soft: #1f3a52;     /* selection / active background */
            --shadow-md: 0 8px 22px -6px rgba(0,0,0,0.55);
        }
        /* Harmonize legacy utility classes in dark mode for consistent readability */
        .dark .bg-white { background-color: var(--bg-alt) !important; }
        .dark .bg-gray-50 { background-color: var(--bg-soft) !important; }
        .dark .text-gray-800 { color: var(--text) !important; }
        .dark .text-gray-700 { color: var(--text) !important; }
        .dark .text-gray-600 { color: var(--text-soft) !important; }
        .dark .text-gray-500 { color: #9aa5b1 !important; }
        .dark .timeline-button[aria-selected="true"] {
            background: var(--accent-soft);
            border-color: var(--accent);
            box-shadow: 0 0 0 2px var(--accent-soft), 0 0 0 4px rgba(78,166,255,.55);
        }
        /* Tone down chart filter so text stays crisp */
        .dark canvas { filter: brightness(1.04) contrast(1.02); }

        /* Optional: subtle surface elevation tweak for dark to separate layers */
        .dark .e-surface,
        .dark .timeline-button {
            box-shadow: 0 2px 4px -1px rgba(0,0,0,0.5), 0 4px 14px -4px rgba(0,0,0,0.55);
        }
        /* Improve body text clarity */
        .dark body { -webkit-font-smoothing: antialiased; }
        body {
            background: var(--bg);
            color: var(--text);
            transition: background .4s ease, color .4s ease;
        }
        .e-surface {
            background: var(--bg-alt);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            transition: background .4s, border-color .4s, box-shadow .3s;
        }
        .e-surface:hover {
            box-shadow: var(--shadow-md);
        }
        .pro-heading {
            letter-spacing: -0.02em;
        }
        .accent-gradient-text {
            background: var(--grad-accent);
            -webkit-background-clip: text;
            color: transparent;
        }
        .nav-link {
            position: relative;
            padding: .25rem .5rem;
        }
        .nav-link:after {
            content:"";
            position:absolute;
            left:0; bottom:-4px;
            height:2px; width:0;
            background: var(--grad-accent);
            border-radius:2px;
            transition: width .35s cubic-bezier(.4,.0,.2,1);
        }
        .nav-link:hover:after,
        .nav-link[aria-current="true"]:after {
            width:100%;
        }
        .timeline-button {
            position:relative;
            background: var(--bg-alt);
            border:1px solid var(--border);
        }
        .timeline-button[aria-selected="true"] {
            background: var(--accent-soft);
            border-color: var(--accent);
            box-shadow: 0 0 0 2px var(--accent-soft), 0 0 0 4px var(--accent);
        }
        .timeline-button:focus-visible {
            outline:2px solid var(--accent);
            outline-offset:2px;
        }
        .timeline-item-content {
            animation: fadeSlide .45s ease;
        }
        @keyframes fadeSlide {
            from { opacity:0; transform: translateY(6px); }
            to { opacity:1; transform: translateY(0); }
        }
        @media (prefers-reduced-motion: reduce) {
            .timeline-item-content, .nav-link:after { animation:none; transition:none; }
        }
        /* KPI snapshot grid */
        .kpi-tile {
            background: var(--bg-alt);
            border:1px solid var(--border);
            border-radius: var(--radius-md);
            padding:1rem 1.1rem;
            display:flex;
            flex-direction:column;
            gap:.15rem;
            box-shadow: var(--shadow-xs);
            transition: transform .35s;
        }
        .kpi-tile:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-md);
        }
        /* Career Journey sidebar scroll fix */
        .timeline-buttons-container {
            overflow-y: auto;
            padding-right: .5rem;
            height: 100%;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: thin;
            scrollbar-color: var(--accent) var(--bg-soft);
            position: relative;
        }
        .timeline-buttons-container::-webkit-scrollbar {
            width: 8px;
        }
        .timeline-buttons-container::-webkit-scrollbar-track {
            background: var(--bg-soft);
            border-radius: 8px;
        }
        .timeline-buttons-container::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: 8px;
            background-clip: padding-box;
        }
        .timeline-buttons-container::after {
            content:"";
            position:absolute;
            left:0; right:0; bottom:0;
            height:34px;
            pointer-events:none;
            background: linear-gradient(to bottom, rgba(248,247,241,0), var(--bg));
        }
        .dark .timeline-buttons-container::after {
            background: linear-gradient(to bottom, rgba(15,23,42,0), var(--bg));
        }
        @media (min-width:768px){
            /* Allocate vertical space minus top/bottom paddings (adjust as needed) */
            .timeline-buttons-container {
                max-height: calc(90vh - 2rem);
            }
        }
        @media print {
            /* Removed "#achievements .chart-container" so portfolio can appear */
            nav, #competencies, .theme-controls, .scroll-hint, .dark-toggle, .print-btn { display:none !important; }
            body { background:#ffffff; color:#000; }
            .e-surface, .kpi-tile { box-shadow:none !important; border:1px solid #999; }
            a { color:#000; text-decoration:none; }
            #experience { page-break-before: avoid; }
            .no-print { display:none !important; }
            .print-only { display:block !important; }
            #experience .experience-print-block { page-break-inside: avoid; }
            #experience .experience-print-block h3 { margin: .25rem 0 .15rem; font-size: 1.15rem; }
            #experience .experience-print-block ul { margin: .25rem 0 .35rem 1.1rem; }
        }
        /* Additional print utilities */
        @media print {
            .print-page-break { break-before: page; page-break-before: always; }
            .print-avoid-break { break-inside: avoid; page-break-inside: avoid; }
        }
        /* Dark mode chart inversion helper */
        .dark canvas { filter: brightness(1.05) contrast(1.05); }

        /* Dark mode nav visibility fixes */
        .dark nav { background: rgba(36,49,66,0.92) !important; border-bottom: 1px solid var(--border); }
        .dark nav a { color: var(--text-soft) !important; transition: color .25s; }
        .dark nav a:hover,
        .dark nav a[aria-current="true"] { color: var(--accent) !important; }
        .dark nav a:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }
        /* Mobile menu inherits */
        .dark #mobile-menu a { color: var(--text-soft) !important; }
        .dark #mobile-menu a:hover { color: var(--accent) !important; }
    </style>
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context":"https://schema.org",
      "@type":"Person",
      "name":"Eric Dao",
      "jobTitle":"Engineering Leader / IT Director",
      "email":"mailto:ericdaoinus@gmail.com",
      "url":"https://www.linkedin.com/in/ericgcdao/",
      "address":{"@type":"PostalAddress","addressLocality":"Kowloon","addressCountry":"HK"},
      "knowsAbout":[
        "Strategic Technology Leadership","Cloud Platforms","High Availability Architecture",
        "Product Engineering Management","Data-Driven Transformation","AI / ML Adoption",
        "Blockchain / Web3 Architecture","IoT Systems","Operational Excellence"
      ],
      "alumniOf":[
        {"@type":"CollegeOrUniversity","name":"University of Washington"},
        {"@type":"CollegeOrUniversity","name":"California Polytechnic University"}
      ]
    }
    </script>
    <!-- ...existing code... -->
</head>
<body class="antialiased">

    <nav class="bg-white/80 dark:bg-[#0f172acc] backdrop-blur-md sticky top-0 z-50 shadow-sm supports-backdrop-blur">
        <div class="container mx-auto px-6 py-3">
            <div class="flex justify-between items-center">
                <a href="#hero" class="text-xl font-bold text-gray-800">Eric Dao</a>
                <div class="hidden md:flex space-x-6 items-center">
                    <a href="#competencies" class="text-gray-600 hover:text-blue-500 transition-colors">Competencies</a>
                    <a href="#experience" class="text-gray-600 hover:text-blue-500 transition-colors">Experience</a>
                    <a href="#achievements" class="text-gray-600 hover:text-blue-500 transition-colors">Achievements</a>
                    <a href="#education" class="text-gray-600 hover:text-blue-500 transition-colors">Education</a>
                    <button id="themeToggle" class="dark-toggle text-sm px-3 py-1.5 rounded-md border border-transparent hover:border-blue-400 transition-colors" aria-label="Toggle dark mode">🌓</button>
                    <button id="printResume" class="print-btn text-sm px-3 py-1.5 rounded-md border border-blue-500 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 transition-colors" aria-label="Print / Save PDF">Print</button>
                </div>
                <div class="md:hidden">
                    <button id="mobile-menu-button" class="text-gray-600 focus:outline-none">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                    </button>
                </div>
            </div>
            <div id="mobile-menu" class="hidden md:hidden mt-4 space-y-2">
                <a href="#competencies" class="block py-2 text-gray-600 hover:text-blue-500">Competencies</a>
                <a href="#experience" class="block py-2 text-gray-600 hover:text-blue-500">Experience</a>
                <a href="#achievements" class="block py-2 text-gray-600 hover:text-blue-500">Achievements</a>
                <a href="#education" class="block py-2 text-gray-600 hover:text-blue-500">Education</a>
                <div class="flex gap-3 pt-2">
                    <button id="themeToggleMobile" class="text-xs px-3 py-1 border rounded-md">Theme</button>
                    <button id="printResumeMobile" class="text-xs px-3 py-1 border rounded-md">Print</button>
                </div>
            </div>
        </div>
    </nav>
    <!-- HERO -->
    <section id="hero" class="py-20 md:py-28">
        <div class="container mx-auto px-6 text-center max-w-5xl">
            <h1 class="pro-heading text-4xl md:text-6xl font-extrabold leading-tight tracking-tight">
                Eric Dao
            </h1>
            <p class="mt-3 text-xl md:text-2xl font-medium accent-gradient-text">Engineering & Technology Executive | Platform, Product & Transformation</p>
            <div class="mt-6 text-gray-600 dark:text-text-soft max-w-4xl mx-auto text-lg leading-relaxed">
                <p>
                    Enterprise-scale engineering leader with a record of architecting resilient platforms, scaling global multi‑disciplinary teams, and converting strategy into sustained revenue, efficiency, quality, and innovation outcomes. Blends product intuition, operational rigor, and modernization mindset (AI, data, cloud, automation) to accelerate roadmap velocity while reducing complexity and risk.
                </p>
            </div>
            <div class="mt-8 flex flex-wrap justify-center items-center gap-x-6 gap-y-2 text-gray-500 dark:text-text-soft text-sm">
                <span>Kowloon, Hong Kong</span>
                <span>&bull;</span>
                <a href="mailto:ericdaoinus@gmail.com" class="hover:text-blue-500">ericdaoinus@gmail.com</a>
                <span>&bull;</span>
                <a href="https://www.linkedin.com/in/ericgcdao/" target="_blank" rel="noopener noreferrer" class="hover:text-blue-500">LinkedIn</a>
            </div>
            <!-- KPI Snapshot -->
            <div class="mt-12 grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6 text-left">
                <div class="kpi-tile">
                    <span class="text-xs tracking-wide uppercase text-gray-500">Org Scale Led</span>
                    <span class="text-2xl font-bold text-blue-600 dark:text-blue-400">55+</span>
                    <span class="text-xs text-gray-500">Cross-discipline</span>
                </div>
                <div class="kpi-tile">
                    <span class="text-xs tracking-wide uppercase text-gray-500">Availability</span>
                    <span class="text-2xl font-bold text-blue-600 dark:text-blue-400">99.999%</span>
                    <span class="text-xs text-gray-500">Critical platforms</span>
                </div>
                <div class="kpi-tile">
                    <span class="text-xs tracking-wide uppercase text-gray-500">Cost Efficiency</span>
                    <span class="text-2xl font-bold text-blue-600 dark:text-blue-400">30%</span>
                    <span class="text-xs text-gray-500">Run-rate reduced</span>
                </div>
                <div class="kpi-tile">
                    <span class="text-xs tracking-wide uppercase text-gray-500">Innovation</span>
                    <span class="text-2xl font-bold text-blue-600 dark:text-blue-400">10 + 1</span>
                    <span class="text-xs text-gray-500">Patents (1 pending)</span>
                </div>
            </div>
        </div>
    </section>

    <main>
        <section id="competencies" class="py-16 bg-white">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl font-bold text-center mb-4">Core Competencies</h2>
                <p class="text-center text-gray-600 max-w-2xl mx-auto mb-12">This section outlines my primary areas of expertise, showcasing the skills I've honed throughout my career. The chart below provides a visual representation of my proficiency in key leadership and technical domains, allowing you to quickly grasp my core strengths.</p>
                <div class="chart-container">
                    <canvas id="competenciesChart"></canvas>
                </div>
            </div>
        </section>

        <section id="experience" class="py-16">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl font-bold text-center mb-4">Career Journey</h2>
                <p class="text-center text-gray-600 max-w-2xl mx-auto mb-12">Explore my professional history through this interactive timeline. Each point represents a significant role in my career. Click on any position to view detailed responsibilities and key accomplishments from that period. The most recent role is selected by default.</p>
                <div class="flex flex-col md:flex-row gap-8 md:h-[90vh] md:max-h-[800px] md:overflow-hidden no-print">
                    <div class="w-full md:w-1/3 relative timeline-buttons-container h-full">
                        <div class="border-l-2 border-blue-200 absolute h-full left-4"></div>
                        <div id="timeline-buttons" class="space-y-8 pb-24"></div>
                        <div class="scroll-hint"></div>
                    </div>
                    <div class="w-full md:w-2/3 bg-white p-8 rounded-xl shadow-lg overflow-y-auto">
                        <div id="experience-details">
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Add print-page-break class -->
        <section id="achievements" class="py-16 bg-white print-page-break">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl font-bold text-center mb-4">Key Achievements & Innovations</h2>
                <p class="text-center text-gray-600 max-w-2xl mx-auto mb-12">This dashboard highlights some of my most significant career accomplishments, from scaling teams and securing intellectual property to driving market growth. These metrics provide a quantitative look at the impact I've delivered in various leadership roles.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12">
                     <div class="bg-gray-50 p-6 rounded-lg text-center">
                        <div class="text-blue-500 text-4xl font-bold">10</div>
                        <div class="text-gray-600 mt-2">Patents Filed</div>
                    </div>
                     <div class="bg-gray-50 p-6 rounded-lg text-center">
                        <div class="text-blue-500 text-4xl font-bold">8x</div>
                        <div class="text-gray-600 mt-2">Team Growth Leadership</div>
                    </div>
                    <div class="bg-gray-50 p-6 rounded-lg text-center">
                        <div class="text-blue-500 text-4xl font-bold">4.5+ ★</div>
                        <div class="text-gray-600 mt-2">App Store Ratings</div>
                    </div>
                </div>
                 <div class="text-center">
                    <h3 class="text-2xl font-bold mb-4">Patent Portfolio</h3>
                    <div class="chart-container">
                        <canvas id="patentsChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Add print-page-break class -->
        <section id="education" class="py-16 print-page-break">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl font-bold text-center mb-12">Education</h2>
                <div class="max-w-3xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <p class="text-gray-500">1996 - 1999</p>
                        <h3 class="text-xl font-bold mt-2">Master of Science: Database, Network</h3>
                        <p class="text-gray-600 mt-1">University of Washington - Seattle, WA</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <p class="text-gray-500">1990 - 1993</p>
                        <h3 class="text-xl font-bold mt-2">Bachelor of Science: Computer Engineering</h3>
                        <p class="text-gray-600 mt-1">California Polytechnic University - San Luis Obispo, CA</p>
                        <p class="text-sm text-blue-500 mt-2">Summa Cum Laude</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-gray-800 text-white py-6">
        <div class="container mx-auto px-6 text-center">
            <p>&copy; 2025 Eric Dao. All Rights Reserved.</p>
            <p class="text-sm text-gray-400 mt-2">Interactive resume designed and generated to showcase professional experience.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const experienceData = [
                {
                    id: 'price',
                    date: '2023 - Present',
                    title: 'IT Director',
                    company: 'Price.com.hk',
                    companyType: 'an e-commerce platform',
                    details: [
                        'Spearheaded strategic technology investments to drive business growth.',
                        'Directed end-to-end product development lifecycle, from concept to execution.',
                        'Ensured technology strategy was in close alignment with core business objectives.',
                        'Cultivated and managed partnerships with third-party solution providers to enhance platform capabilities.',
                        'Led and mentored technical and product teams in Hong Kong and China to achieve and exceed annual performance targets.',
                        'Incubating AI adoption that use RAG to address IM fraud detection, and top 5 customer service kpi.',
                        'Experiment with homegrown LLM to improve code quality and automation efficiency and effectiveness.'
                    ],
                    highlights: [
                        'Received the Digital Transformation Corporate – Outstanding Award from Standard Chartered for two consecutive years (2023, 2024).',
                        'Led the unification of user experience and codebase across all platforms.',
                        'Drove a 20% year-over-year improvement in both merchant and user engagement.',
                        'Accelerated the feature release cycle by a factor of 4x.',
                        'Achieved a 30% reduction in service costs.',
                        'Successfully prepared the platform for Generative Engine Optimization (GEO).',
                        'Maintained a perfect record of zero security incidents.',
                        'Achieved a 99.999% uptime.',
                        'Cultivated a high-performance culture that resulted in zero attrition within the team.'
                    ]
                },
                {
                    id: 'pico',
                    date: '2023-01 - 2023-06',
                    title: 'Software Architect & Web3 Consultant',
                    company: 'Pico Global',
                    companyType: 'a global Brand and Event management company',
                    details: [
                        'Refined and updated service architecture to align with new business requirements.',
                        'Implemented a modern software stack to reduce error uncertainty, raise service quality, and lower maintenance costs.',
                        'Championed a best-in-class data pipeline processing architecture to improve the efficiency and effectiveness of lead discovery.',
                        'Conducted thorough due diligence on business-relevant Web3 projects, providing management with key insights for strategic decision-making.',
                        'Provided coaching and mentorship to senior IT team members on strategic technology investments and effective people management.'
                    ],
                    highlights: []
                },
                {
                    id: 'aladdin',
                    date: '2018 - 2022',
                    title: 'Technical Fellow & CTO',
                    company: 'Aladdin FinTech Company Limited',
                    companyType: 'a FinTech and Web3 service company',
                    details: [
                        'Architected and implemented a private/consortium blockchain on Fabric for Real Estate Fractionalization.',
                        'Engineered smart contracts for a secure and automated payment-on-delivery system.',
                        'Developed a cross-chain decentralized application for efficient asset tokenization and management.',
                        'Provided expert technical consultancy and architectural guidance to two leading Crypto Exchanges.',
                        'Designed and deployed a highly secure hot/cold wallet system, meeting stringent Japanese regulatory requirements.',
                        'Launched KOL.shop, a successful cross-border e-commerce platform.'
                    ],
                    highlights: [
                        'Directed the successful launch of two crypto exchanges, with one securing an operational license in Japan.',
                        'Secured a patent filing for a proprietary Smart Contract protocol for payment-on-delivery (USPTO: 62654352).'
                    ]
                },
                {
                    id: 'gurumind',
                    date: '2017 - 2018',
                    title: 'CTO (Co-founder)',
                    company: 'Gurumind',
                    companyType: 'a new retail service, and data company',
                    details: [
                        'Pioneered an end-to-end IoT/AI solution to capture and analyze consumer behavior and spending patterns.',
                        'Developed and deployed advanced data analytical algorithms to build predictive models for store operations.'
                    ],
                    highlights: [
                        'Successfully piloted a data-gathering and analysis system in stores across Beijing and Shanghai.',
                        'Filed 2 patents for Retail Store Camera IoT Device Construct and Data Gathering.'
                    ]
                },
                {
                    id: 'xiaoyi',
                    date: '2015 - 2017',
                    title: 'General Manager',
                    company: 'Shanghai Xiaoyi Technology',
                    companyType: 'an IOT hardware and service company under XiaoMi Smart Home umbrella',
                    details: [
                        'Championed end-to-end product development and business operations for the YI Home Camera.',
                        'Managed full P&L responsibility for the product line.',
                        'Led a cross-functional team of 52 direct reports, overseeing hardware/software development, production, and marketing, while reporting directly to the CEO.',
                        'Successfully integrated the YI Home Camera product line into the Mi (Xiaomi) Home IoT ecosystem.'
                    ],
                    highlights: [
                        'Propelled YI Home Camera to #1 best-selling in China within 1.5 years, expanding user base 5x.',
                        'Achieved Top 10 best-seller on US Amazon.',
                        'Grew app ratings to 4.5+ stars on both Google and iOS App Stores.'
                    ]
                },
                {
                    id: 'microsoft-principal-group-extensibility',
                    date: '2015-02 - 2015-05',
                    title: 'Principal Group Engineering Manager',
                    company: 'Microsoft',
                    companyType: 'a multinational software, service, and hardware company',
                    details: [
                        'Led a cross-disciplinary team of 55 engineers and product managers to successfully deliver the Office Add-in platform for Web Word, PowerPoint, and Excel.',
                        'Drove the development of Office 365 controls and external data connectivity, positioning the project as a direct competitor to Google’s offerings and a key component of a cross-platform strategy to ensure Office accessibility across all devices.'
                    ],
                    highlights: []
                },
                {
                    id: 'microsoft-principal-group-ocas',
                    date: '2014-11 - 2015-02',
                    title: 'Principal Group Engineering Manager',
                    company: 'Microsoft',
                    companyType: 'a multinational software, service, and hardware company',
                    details: [
                        'Led a cross-disciplinary team of 57 engineers and product managers within the Office Client Application Service (OCAS) team to deliver web-based Office clients (Word, PowerPoint, and Excel).',
                        'This strategic initiative directly competed with Google for the education market and established a foundational cross-platform strategy to ensure Office accessibility on all devices.'
                    ],
                    highlights: []
                },
                {
                    id: 'microsoft-principal-group-admin',
                    date: '2014-05 - 2014-11',
                    title: 'Principal Group Engineering Manager',
                    company: 'Microsoft',
                    companyType: 'a multinational software, service, and hardware company',
                    details: [
                        'Directed a cross-disciplinary engineering team of 42 to deliver critical Office 365, Exchange, and SharePoint Administration applications for a wide range of on-premise, cloud, and hybrid deployments.',
                        'Initiated the development of a groundbreaking "on the go" Administration solution for Office 365, enhancing accessibility and management for customers.'
                    ],
                    highlights: []
                },
                {
                    id: 'microsoft-principal-development',
                    date: '2007-07 - 2014-05',
                    title: 'Principal Development Manager',
                    company: 'Microsoft',
                    companyType: 'a multinational software, service, and hardware company',
                    details: [
                        'Directed a team of 32 engineers to deliver Office 365, Exchange, and SharePoint Administration tools for a wide range of on-premise, cloud, and hybrid deployments.',
                        'Architected and implemented a unified Administration toolset/framework (SDK) that significantly reduced engineering costs and complexity by providing shared controls, standardized debugging tools, unified telemetry, and a consistent user experience across all portals.'
                    ],
                    highlights: []
                },
                {
                    id: 'microsoft-senior-dev-lead',
                    date: '2000-06 - 2007-06',
                    title: 'Senior Development Lead',
                    company: 'Microsoft',
                    companyType: 'a multinational software, service, and hardware company',
                    details: [
                        'Guided a team of 26 developers in the successful delivery of the Exchange Administration stack for on-premise, cloud, and hybrid deployments, serving enterprise customers.',
                        'Contributed to the development of multiple administration interfaces, including: Windows Form Administration interface (6 versions), Windows PowerShell Administration interface for both on-premise and cloud deployments, Programmability web service interface for on-premise and cloud, and Web-based Administration interface for cloud deployment.'
                    ],
                    highlights: []
                },
                {
                    id: 'microsoft-senior-sde',
                    date: '1998-06 - 2000-06',
                    title: 'Senior Software Design Engineer',
                    company: 'Microsoft',
                    companyType: 'a multinational software, service, and hardware company',
                    details: [
                        'Collaborated with software development and testing teams to design and develop robust solutions that met client requirements for functionality, scalability, and performance.',
                        'Built robust, scalable, modular, and API-centric infrastructures that formed the core of key products.',
                        'Contributed to the development of the Windows Form Administration interface for on-premise deployment (2 versions: Exchange 5.5, 2000).',
                        'Contributed to the development of the foundational setup, performance, and networking protocols (X.25, TCP/IP, NNTP) for Exchange 5.5 and 2000 enterprise servers.'
                    ],
                    highlights: []
                },
                {
                    id: 'microsoft-sde',
                    date: '1993-06 - 1998-06',
                    title: 'Software Design Engineer',
                    company: 'Microsoft',
                    companyType: 'a multinational software, service, and hardware company',
                    details: [
                        'Contributed to the development of X.25 and TCP/IP protocols for Exchange on-premise deployment (version 5.5).',
                        'Contributed to the development of the database transaction engine and the Rule engine (Outlook Inbox Rules) in Exchange 5.5.'
                    ],
                    highlights: []
                },
                {
                    id: 'microsoft-leadership-highlights',
                    date: '1993 - 2015',
                    title: 'Leadership & Achievements',
                    company: 'Microsoft',
                    companyType: 'a multinational software, service, and hardware company',
                    details: [],
                    highlights: [
                        'Incubated the first Exchange project in China, growing the team from 5 to 42 people over nine years (2005 - present).',
                        'Expanded team ownership from single features to entire feature areas within Exchange (2005-2008).',
                        'Grew the team\'s ownership from one product component to three shared products: SharePoint, Exchange, and O365 (2008-present).',
                        'Played a key role in annual extended leadership offsite meetings, contributing to the assessment and definition of the charter and vision for the year ahead (2008-present).',
                        'Served as the development roll-up leader for the Microsoft Office Division in China for annual people performance reviews (2008-2013).',
                        'Drove end-to-end engineering excellence initiatives, including project management, software development/testing, shipping, and product support, as well as training, mentoring, and recruiting (2008-2013).',
                        'Pioneered and implemented the first Hack Day event in the Microsoft Office Division in China (2012).',
                        'Conceived and executed a comprehensive first-year program for new hires, including a boot camp and mentoring ring, to facilitate assimilation into the organization and culture (2013).',
                        'Honored as a member of the campus/intern recruiting v-team that earned the Director/GM award of the year (2013).',
                        'Led the team through a critical service transformation (2013-2015).',
                        'Participated in the Microsoft bench program, a key leadership development initiative (2007).',
                        'Filed 10 patents, with one pending.',
                        'Graduated from the Microsoft Pillar program, a leadership program for the Principal band and above (2011).'
                    ]
                }
            ];
            const timelineButtonsContainer = document.querySelector('.timeline-buttons-container');
            const experienceDetailsContainer = document.getElementById('experience-details');

            let currentExperienceId = 'price'; // track selection

            function displayExperience(id) {
                currentExperienceId = id; // added
                const experience = experienceData.find(e => e.id === id);
                if (!experience) return;
                let detailsHtml = experience.details.map(d => `<li class="mb-2">${d}</li>`).join('');
                let highlightsHtml = experience.highlights.map(h => `<li class="mb-2 font-medium text-blue-600">${h}</li>`).join('');
                experienceDetailsContainer.innerHTML = `
                    <div class="timeline-item-content">
                        <p class="text-sm text-gray-500">${experience.date}</p>
                        <h3 class="text-2xl font-bold text-gray-800 mt-1">${experience.title}</h3>
                        <p class="text-lg text-blue-600 font-medium">${experience.company}</p>
                        <p class="text-sm text-gray-500 italic mb-4">${experience.companyType}</p>
                        ${experience.details.length > 0 ? `
                        <h4 class="font-semibold text-gray-700 mb-2 border-b pb-1">Responsibilities:</h4>
                        <ul class="list-disc list-inside text-gray-600 space-y-2">
                            ${detailsHtml}
                        </ul>` : ''}
                        ${experience.highlights.length > 0 ? `
                        <h4 class="font-semibold text-gray-700 mt-6 mb-2 border-b pb-1">Key Highlights:</h4>
                        <ul class="list-disc list-inside text-gray-600 space-y-2">
                            ${highlightsHtml}
                        </ul>` : ''}
                    </div>
                `;
                
                document.querySelectorAll('#timeline-buttons button').forEach(btn => {
                    btn.setAttribute('aria-selected', btn.dataset.id === id);
                });
            }

            experienceData.forEach(exp => {
                const button = document.createElement('button');
                button.dataset.id = exp.id;
                button.setAttribute('role', 'tab');
                button.setAttribute('aria-selected', 'false');
                button.className = 'timeline-button w-full text-left p-4 rounded-lg hover:bg-blue-50 transition-all duration-300 focus:outline-none';
                button.innerHTML = `
                    <div class="flex items-center">
                        <div class="bg-blue-500 rounded-full w-8 h-8 flex-shrink-0 border-4 border-white shadow-md mr-4"></div>
                        <div>
                            <p class="font-bold text-gray-800">${exp.title}</p>
                            <p class="text-sm text-gray-500">${exp.company}</p>
                        </div>
                    </div>
                `;
                button.addEventListener('click', () => displayExperience(exp.id));
                document.getElementById('timeline-buttons').appendChild(button);
            });
            
            if (timelineButtonsContainer.scrollHeight > timelineButtonsContainer.clientHeight) {
                timelineButtonsContainer.classList.add('is-scrollable');
            }
            
            displayExperience('price');
            // Replace original Chart initializations with try/catch for resilience
            const competenciesData = {
                labels: ['Strategic Leadership', 'Team & Collaborative Leadership', 'End-to-End Product Management', 'Innovative Problem-Solving', 'Data-Driven Decision Making'],
                datasets: [{
                    label: 'Proficiency',
                    data: [95, 98, 90, 88, 85],
                    backgroundColor: 'rgba(66,153,225,0.6)',
                    borderColor: 'rgba(66,153,225,1)',
                    borderWidth: 1
                }]
            };
            try {
                const compCtx = document.getElementById('competenciesChart');
                if (compCtx && window.Chart) {
                    new Chart(compCtx, {
                        type: 'bar',
                        data: competenciesData,
                        options: {
                            indexAxis: 'y',
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: { display: false },
                                tooltip: {
                                    callbacks: {
                                        label: (context) => `${context.label}: ${context.raw}%`
                                    }
                                }
                            },
                            scales: {
                                x: {
                                    beginAtZero: true,
                                    max: 100,
                                    ticks: { callback: (value) => value + '%' }
                                }
                            }
                        }
                    });
                }
            } catch(e) { console.warn('Competencies chart init failed', e); }

            // Store patents chart instance for print handling
            let patentsChartInstance = null;
            try {
                const patCtx = document.getElementById('patentsChart');
                if (patCtx && window.Chart) {
                    patentsChartInstance = new Chart(patCtx, {
                        // ...existing chart config...
                        type: 'doughnut',
                        data: {
                            labels: ['Filed', 'Pending'],
                            datasets: [{
                                data: [10, 1],
                                backgroundColor: ['rgba(66,153,225,0.7)','rgba(237,137,54,0.7)'],
                                borderColor: ['#FFFFFF'],
                                borderWidth: 2,
                                hoverOffset: 4
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: { position: 'bottom' },
                                tooltip: { callbacks: { label: (c) => ` ${c.label}: ${c.raw}` } }
                            }
                        }
                    });
                }
            } catch(e) { console.warn('Patents chart init failed', e); }

            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            document.querySelectorAll('#mobile-menu a').forEach(link => {
                link.addEventListener('click', () => {
                    mobileMenu.classList.add('hidden');
                });
            });
            // THEME & UTILITIES
            const root = document.documentElement;
            const toggleButtons = [document.getElementById('themeToggle'), document.getElementById('themeToggleMobile')].filter(Boolean);
            const storedTheme = localStorage.getItem('pref-theme');
            if (storedTheme === 'dark' || (!storedTheme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                root.classList.add('dark');
            }
            toggleButtons.forEach(btn => btn.addEventListener('click', () => {
                root.classList.toggle('dark');
                localStorage.setItem('pref-theme', root.classList.contains('dark') ? 'dark' : 'light');
            }));
            // BUILD FULL EXPERIENCE LIST FOR PRINT (unchanged logic, ensure callable)
            function buildAllExperiencesHtml() {
                return experienceData.map(exp => {
                    const details = exp.details.length
                        ? `<h4 class="font-semibold mt-2">Responsibilities:</h4>
                           <ul>${exp.details.map(d => `<li>${d}</li>`).join('')}</ul>`
                        : '';
                    const highlights = exp.highlights.length
                        ? `<h4 class="font-semibold mt-2">Key Highlights:</h4>
                           <ul>${exp.highlights.map(h => `<li>${h}</li>`).join('')}</ul>`
                        : '';
                    return `<article class="experience-print-block">
                        <p class="text-xs text-gray-500">${exp.date}</p>
                        <h3 class="font-bold">${exp.title}</h3>
                        <p class="text-blue-600 font-medium">${exp.company}</p>
                        <p class="italic text-gray-500 mb-1">${exp.companyType}</p>
                        ${details}${highlights}
                    </article>`;
                }).join('');
            }

            let printAllContainer = null;
            let patentsImageEl = null;
            let patentsSummaryEl = null;

            function preparePrint() {
                if (!printAllContainer) {
                    const experienceSection = document.getElementById('experience').querySelector('.container');
                    printAllContainer = document.createElement('div');
                    printAllContainer.id = 'experience-print-all';
                    printAllContainer.className = 'print-only mt-6 text-sm';
                    experienceSection.appendChild(printAllContainer);
                }
                printAllContainer.innerHTML = buildAllExperiencesHtml();

                // Create static image + textual summary for patent portfolio
                const patCanvas = document.getElementById('patentsChart');
                if (patCanvas) {
                    // Replace live canvas with static image for print fidelity
                    if (!patentsImageEl) {
                        patentsImageEl = document.createElement('img');
                        patentsImageEl.id = 'patentsChartPrintImage';
                        patentsImageEl.className = 'print-only mx-auto mt-4 max-w-xs';
                        patentsImageEl.alt = 'Patent Portfolio: Filed vs Pending';
                        patCanvas.parentNode.appendChild(patentsImageEl);
                    }
                    try {
                        patentsImageEl.src = patCanvas.toDataURL('image/png');
                        patCanvas.classList.add('no-print');
                    } catch(e) {
                        console.warn('Canvas toDataURL failed', e);
                    }
                    // Add numeric summary (fallback / accessibility)
                    if (!patentsSummaryEl) {
                        patentsSummaryEl = document.createElement('div');
                        patentsSummaryEl.id = 'patentsChartPrintSummary';
                        patentsSummaryEl.className = 'print-only text-sm text-center mt-2';
                        patCanvas.parentNode.appendChild(patentsSummaryEl);
                    }
                    if (patentsChartInstance) {
                        const filed = patentsChartInstance.data.datasets[0].data[0];
                        const pending = patentsChartInstance.data.datasets[0].data[1];
                        patentsSummaryEl.innerHTML = `<strong>Patent Portfolio:</strong> Filed: ${filed} &nbsp;|&nbsp; Pending: ${pending}`;
                    }
                }
            }

            function restoreAfterPrint() {
                if (printAllContainer && printAllContainer.parentNode) {
                    printAllContainer.parentNode.removeChild(printAllContainer);
                    printAllContainer = null;
                }
                // Remove temporary patent image/summary & restore canvas
                if (patentsImageEl && patentsImageEl.parentNode) {
                    patentsImageEl.parentNode.removeChild(patentsImageEl);
                    patentsImageEl = null;
                }
                if (patentsSummaryEl && patentsSummaryEl.parentNode) {
                    patentsSummaryEl.parentNode.removeChild(patentsSummaryEl);
                    patentsSummaryEl = null;
                }
                const patCanvas = document.getElementById('patentsChart');
                if (patCanvas) patCanvas.classList.remove('no-print');
                displayExperience(currentExperienceId);
            }

            // Update existing listeners to use enhanced prepare/restore
            window.addEventListener('beforeprint', preparePrint);
            window.addEventListener('afterprint', restoreAfterPrint);

            // Ensure button print path also goes through updated prepare
            function safePrint() {
                try { preparePrint(); } catch(e){ console.warn('preparePrint failed', e); }
                requestAnimationFrame(() => window.print());
            }
            // Update print button wiring (keep existing code, just ensure safePrint used)
            [document.getElementById('printResume'), document.getElementById('printResumeMobile')].filter(Boolean)
                .forEach(btn => {
                    btn.replaceWith(btn.cloneNode(true));
                });
            [document.getElementById('printResume'), document.getElementById('printResumeMobile')].filter(Boolean)
                .forEach(btn => btn.addEventListener('click', safePrint));

            // ACTIVE NAV HIGHLIGHT + Chart defaults (unchanged)
            const sections = ['hero','competencies','experience','achievements','education'].map(id => document.getElementById(id));
            const navLinks = Array.from(document.querySelectorAll('nav a[href^="#"]'));
            const io = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    if(entry.isIntersecting) {
                        navLinks.forEach(l => l.removeAttribute('aria-current'));
                        const active = navLinks.find(l => l.getAttribute('href') === '#' + entry.target.id);
                        if(active) active.setAttribute('aria-current','true');
                    }
                });
            }, { rootMargin: '-40% 0px -50% 0px', threshold: 0 });
            sections.forEach(s => io.observe(s));

            // Improve chart fonts to align with theme
            if (window.Chart) {
                Chart.defaults.font.family = 'Inter, system-ui, sans-serif';
                Chart.defaults.color = getComputedStyle(document.body).getPropertyValue('--text-soft') || '#4a5568';
            }
            // (Optional) Re-run scrollable check after rendering to keep scroll-hint logic intact
            function markScrollable(){
                if(!timelineButtonsContainer) return;
                if (timelineButtonsContainer.scrollHeight > timelineButtonsContainer.clientHeight) {
                    timelineButtonsContainer.classList.add('is-scrollable');
                } else {
                    timelineButtonsContainer.classList.remove('is-scrollable');
                }
            }
            // After experience buttons added (displayExperience already called earlier in existing code)
            setTimeout(markScrollable, 0);
            window.addEventListener('resize', markScrollable);
        });
    </script>
</body>
</html>
